
1) Dowload the secuences from pfam database 

  $ wget "ftp://ftp.ebi.ac.uk/pub/databases/Pfam/current_release/Pfam-A.fasta.gz"

2) Obtain fasta secuenes from each pfams (pfam_terms.tab)  in separated files 

  $ for pfam in `cat pfam_terms.tab ` ; do grep $pfam --after-context=1 Pfam-A.fasta > $pfam.fasta ; done 

 3) Check if the number of sequences corresponde to the numer of sequences for each model 

  $ grep -c ">" *.fasta 

Number of proteins used to build each gene family 


From the header of each sequence, obtain the list of UNIPROT identifiers in order to obtain the corresponding sps for each protein sequence
for fasta in *; do grep  ">" $fasta | sed 's/ /\t/g' | sed 's/>//g' | sed 's/\//\t/g' | cut -f 1  > $fasta.uniprot.txt ; done

We have a lot of headers names create folders and cd intothem 
for i in *.txt; do mkdir $i.names && mv $i $i.names ; done 

Execute every time in the folder (not recomended for more thant 1000 request!! not useful! 
for uni in `cat PF14306.fasta.uniprot.txt.names/PF14306.fasta.uniprot.txt `; do  perl -MSOAP::Lite -e '$soap=SOAP::Lite->service("http://www.ebi.ac.uk/Tools/webservices/wsdl/WSDbfetch.wsdl");print $soap->fetchData("uniprot:'$uni'","fasta","raw")'>> PF14306.fasta.uniprot.txt ; done
